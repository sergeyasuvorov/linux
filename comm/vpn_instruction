Инструкция по настройке VPN для Ubuntu / Linux mint


По умолчанию поддержка протокола L2TP/IPSec отсутствует, поэтому нужно добавить её вручную с помощью команд:

yay -S network-manager-l2tp networkmanager-strongswan

sudo vim /etc/ppp/options.l2tpd
-- comment "nodefaultroute"
-- comment "proxyarp"

Открываем сетевые соединения
Далее добавляем новое vpn соединение с типом  L2TP
Заполняем поля и не забываем вписать Pre-shared key (в "Настройки IPsec"). 
После настройки включаем VPN, открываем терминал и выполняем команду nslookup <имя вашей машины в сети>. Например:
nslookup vpupkin.domain.corp и узнаём на IP

Теперь, если вы хотите иметь доступ к интернету на локальной машине и одновременно подключаться к рабочему компьютеру, вам понадобится добавить маршрут. 
Открываем «параметры сети», берём server ip (поле Server) из предыдущего шага и вписываем в поле «шлюз». Address (поле Address под полем Name) так же берём из предыдущего шага. Не забудьте установить галку «использовать это подключение только для ресурсов в этой сети». После этого сохраняем и перезапускаем vpn соединение

Дальше для доступа к рабочему компьютеру вам понадобиться клиент удалённых рабочих столов. Например Reminna. Указываем имя и пароль для входа, адрес сервера берём из шага 5 инструкции (последняя строка вывода консоли).  И подключаемся

Смородина

fg-vpn.mosenergosbyt.ru
firsova_ee@interrao.ru
EtuhXix#95